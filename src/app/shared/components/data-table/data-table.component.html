<div class="overflow-auto border" [ngClass]="ngClass()">
    <table mat-table [dataSource]="dataSource">
        @for (col of columns(); track $index) {
            <ng-container [matColumnDef]="col.field()">
                <th mat-header-cell *matHeaderCellDef class="!bg-primary text-white !text-center">
                    {{col.title()}}
                </th>
                <td mat-cell *matCellDef="let element; let i = index" [class]="col.class">
                    @if (col.template()) {
                        <ng-container [ngTemplateOutlet]="col.template()!" [ngTemplateOutletContext]="{value: element[col.field()], data: element}"></ng-container>
                    } @else {
                        {{element[col.field()]}}
                    }
                </td>
            </ng-container>
        }

        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="!bg-primary text-white !text-center">
                Acción
            </th>
            <td mat-cell *matCellDef="let element; let i = index">
                <div class="d-flex flex-nowrap" [ngClass]="centerButtons() ? 'justify-content-center' : ''">
                    @for (button of buttons(); track $index) {
                        @if (!button.showWhen() || button.showWhen()!(element)) {
                            <button mat-icon-button [matTooltip]="button.tooltip() || ''" color="primary" (click)="button.action.emit({data: element, index: i})">
                                <mat-icon>{{button.icon()}}</mat-icon>
                            </button>
                        }
                    }
                </div>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns(); sticky: true;"></tr>
    </table>
    <div class="text-center p-3 border">
        {{emptyMessage()}}
    </div>
</div>

@if (pageable()) {
    <mat-paginator
        (page)="changePageEvent($event)"
        [pageSize]="pageSize()"
        [showFirstLastButtons]="true"
        [pageSizeOptions]="[5, 10, 25, 100]"
        aria-label="Seleccionar página">
    </mat-paginator>
}
